# map_viewer_mock_server

## ОПИС

Це mock-сервер, який генерує набір гео-поінтів для тестування фронт-енд застосунку.

***GET /token*** - запит на отримання "токену" для використання в інших запитах. 

повертає:
```
{
"accessToken": "23f9932b-a944-4d43-ad2e-0c29f5b4ee9b"
}
```

***GET /engine/start*** - запит на включення генерації гео-поінтів 

***GET /engine/stop*** - запит на генерації гео-поінтів, та ресету "токену"

***GET /geo*** - запит на отримання пакету гео-поінтів

повертає:
```
[
  {
    id: "280b600b-a962-41e9-9d09-3760727e490b",
    lat: 47.756922186609906,
    lng: 37.615601149808604,
    direction: 299
  },
  ...
  {
    ...
  },
]
```

Сервер генерує масив гео-поінтів:
```
{
  id: string,
  lat: number,
  lng: number,
  direction: number
}
```

За запитом /engine/start генеруэться масив гео-поінтів з випадковою (від 100 до 200) кількістю елементів, у межах заданого периметра.

При кожній ітерації у 80% гео-поінтів змінюється координата та напрямок.

Кожні 3 секунди з масиву видаляється рандомна кількість(від 1 до 5) гео-поінтів.

Кожні 5 секунд додається 3 нових гео-поінта.


## Інструкція по запуску

### Попередні вимоги
- Node.js (версія 16 та вище)
- npm (зазвичай інсталюється разом з Node.js)
- Git (для клонування репозиторію)


### Кроки для запуску
1. Клонуйте репозиторій:
```bash
git clone <URL_РЕПОЗИТОРІЯ>
cd map_viewer_mock_server
```

2. Встановіть залежності:
```bash
npm install
```

3. Після встановлення залежностей запустіть додаток
```bash
npm run start
```
або
```bash
npm run build
npm run start:prod
```
4. Перевірте, що сервер запустився.

Після запуску ви повинні побачити повідомлення: "Nest application successfully started".

### Налаштування

Більшість описаних налаштувань можливо змінити у файлі [сonstants.ts](src/constatns.ts)

Налаштувати PORT для сервера та HOST — адресу клієнтського застосунку (origin) можливо в файлі [.env](./.env)

### Додатково
Як що сервер не зупинити, він сам зупиняється через 15 хвилин після старту.
